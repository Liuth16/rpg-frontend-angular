<p-toast />
<div class="card flex justify-center items-center h-screen">
  <p-card header="Register">
    <form
      [formGroup]="registerForm"
      (ngSubmit)="onSubmit()"
      class="flex flex-col gap-4 w-full sm:w-56"
    >
      <!-- Username -->
      <div class="flex flex-col gap-1">
        <input
          pInputText
          type="text"
          id="username"
          placeholder="Username"
          formControlName="username"
          [invalid]="isInvalid('username')"
        />
        @if (isInvalid('username')) {
        <p-message severity="error" size="small" variant="simple">Username is required.</p-message>
        }
      </div>

      <!-- Email -->
      <div class="flex flex-col gap-1">
        <input
          pInputText
          type="email"
          id="email"
          placeholder="Email"
          formControlName="email"
          [invalid]="isInvalid('email')"
        />
        @if (isInvalid('email')) { @if (registerForm.get('email')?.errors?.['required']) {
        <p-message severity="error" size="small" variant="simple">Email is required.</p-message>
        } @if (registerForm.get('email')?.errors?.['email']) {
        <p-message severity="error" size="small" variant="simple"
          >Please enter a valid email.</p-message
        >
        } }
      </div>

      <!-- Password -->
      <div class="flex flex-col gap-1">
        <input
          pInputText
          type="password"
          id="password"
          placeholder="Password"
          formControlName="password"
          [invalid]="isInvalid('password')"
        />
        @if (isInvalid('password')) {
        <p-message severity="error" size="small" variant="simple">Password is required.</p-message>
        }
      </div>

      <!-- Confirm Password -->
      <div class="flex flex-col gap-1">
        <input
          pInputText
          type="password"
          id="confirmPassword"
          placeholder="Confirm Password"
          formControlName="confirmPassword"
          [invalid]="isInvalid('confirmPassword') || (registerForm.errors?.['passwordsMismatch'] && (registerForm.get('confirmPassword')?.touched || formSubmitted()))"
        />
        @if (isInvalid('confirmPassword') &&
        registerForm.get('confirmPassword')?.errors?.['required']) {
        <p-message severity="error" size="small" variant="simple">
          Confirming your password is required.
        </p-message>
        } @if (registerForm.errors?.['passwordsMismatch'] &&
        (registerForm.get('confirmPassword')?.touched || formSubmitted())) {
        <p-message severity="error" size="small" variant="simple">Passwords must match.</p-message>
        }
      </div>

      <button pButton severity="secondary" type="submit"><span pButtonLabel>Register</span></button>
    </form>
  </p-card>
</div>
