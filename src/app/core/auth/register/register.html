<p-toast />
<div class="card flex justify-center items-center h-screen register-background">
  <p-card header="Register" class="details-background">
    <form
      [formGroup]="registerForm"
      (ngSubmit)="onSubmit()"
      class="flex flex-col gap-4 w-full sm:w-56"
    >
      <!-- Username -->
      <div class="flex flex-col gap-1">
        <input
          pInputText
          type="text"
          id="username"
          placeholder="Nome de Usuário"
          formControlName="username"
          [invalid]="isInvalid('username')"
        />
        @if (isInvalid('username')) {
        <p-message severity="error" size="small" variant="simple"
          >Nome de usuário é obrigatório.</p-message
        >
        }
      </div>

      <!-- Email -->
      <div class="flex flex-col gap-1">
        <input
          pInputText
          type="email"
          id="email"
          placeholder="Email"
          formControlName="email"
          [invalid]="isInvalid('email')"
        />
        @if (isInvalid('email')) { @if (registerForm.get('email')?.errors?.['required']) {
        <p-message severity="error" size="small" variant="simple">Email é obrigatório.</p-message>
        } @if (registerForm.get('email')?.errors?.['email']) {
        <p-message severity="error" size="small" variant="simple"
          >Por favor, insira um email válido.</p-message
        >
        } }
      </div>

      <!-- Password -->
      <div class="flex flex-col gap-1">
        <input
          pInputText
          type="password"
          id="password"
          placeholder="Senha"
          formControlName="password"
          [invalid]="isInvalid('password')"
        />
        @if (isInvalid('password')) {
        <p-message severity="error" size="small" variant="simple">A senha é obrigatória.</p-message>
        }
      </div>

      <!-- Confirm Password -->
      <div class="flex flex-col gap-1">
        <input
          pInputText
          type="password"
          id="confirmPassword"
          placeholder="Confirmar Senha"
          formControlName="confirmPassword"
          [invalid]="isInvalid('confirmPassword') || (registerForm.errors?.['passwordsMismatch'] && (registerForm.get('confirmPassword')?.touched || formSubmitted()))"
        />
        @if (isInvalid('confirmPassword') &&
        registerForm.get('confirmPassword')?.errors?.['required']) {
        <p-message severity="error" size="small" variant="simple">
          Confirmar sua senha é obrigatório.
        </p-message>
        } @if (registerForm.errors?.['passwordsMismatch'] &&
        (registerForm.get('confirmPassword')?.touched || formSubmitted())) {
        <p-message severity="error" size="small" variant="simple"
          >As senhas devem coincidir.</p-message
        >
        }
      </div>

      <button pButton severity="secondary" type="submit" class="blz-button text-white">
        <span pButtonLabel>Registrar</span>
      </button>
    </form>
  </p-card>
</div>
