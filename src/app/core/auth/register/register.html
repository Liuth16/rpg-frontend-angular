<p-toast />
<div class="register-container">
  <div class="register-content">
    <!-- Decorative top element -->
    <div class="register-emblem">
      <svg
        width="80"
        height="80"
        viewBox="0 0 80 80"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M40 10L50 20L60 10L50 30L60 40L50 50L60 60L50 50L40 70L30 50L20 60L30 50L20 40L30 30L20 20L30 20L40 10Z"
          fill="#8b5a2b"
          stroke="#4a3520"
          stroke-width="2"
        />
        <circle cx="40" cy="40" r="18" fill="none" stroke="#8b5a2b" stroke-width="2" />
        <path
          d="M30 40L37 47L52 32"
          stroke="#4a3520"
          stroke-width="2.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </div>

    <!-- Title -->
    <div class="register-title">
      <h1>Inicie Sua Jornada</h1>
      <p class="register-subtitle">Crie sua conta e torne-se um lendário aventureiro</p>
    </div>

    <!-- Register Card -->
    <div class="register-card">
      <div class="card-corners">
        <span class="corner top-left"></span>
        <span class="corner top-right"></span>
        <span class="corner bottom-left"></span>
        <span class="corner bottom-right"></span>
      </div>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
        <!-- Username -->
        <div class="form-group">
          <label for="username" class="form-label">Nome de Usuário</label>
          <input
            pInputText
            type="text"
            id="username"
            placeholder="Escolha seu nome de usuário"
            formControlName="username"
            [invalid]="isInvalid('username')"
            class="form-input"
          />
          @if (isInvalid('username')) {
          <p-message severity="error" size="small" variant="simple"
            >Nome de usuário é obrigatório.</p-message
          >
          }
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email" class="form-label">Email</label>
          <input
            pInputText
            type="email"
            id="email"
            placeholder="seu@email.com"
            formControlName="email"
            [invalid]="isInvalid('email')"
            class="form-input"
          />
          @if (isInvalid('email')) { @if (registerForm.get('email')?.errors?.['required']) {
          <p-message severity="error" size="small" variant="simple">Email é obrigatório.</p-message>
          } @if (registerForm.get('email')?.errors?.['email']) {
          <p-message severity="error" size="small" variant="simple"
            >Por favor, insira um email válido.</p-message
          >
          } }
        </div>

        <!-- Password -->
        <div class="form-group">
          <label for="password" class="form-label">Senha</label>
          <input
            pInputText
            type="password"
            id="password"
            placeholder="Crie uma senha"
            formControlName="password"
            [invalid]="isInvalid('password')"
            class="form-input"
          />
          @if (isInvalid('password')) {
          <p-message severity="error" size="small" variant="simple"
            >A senha é obrigatória.</p-message
          >
          }
        </div>

        <!-- Confirm Password -->
        <div class="form-group">
          <label for="confirmPassword" class="form-label">Confirmar Senha</label>
          <input
            pInputText
            type="password"
            id="confirmPassword"
            placeholder="Digite a senha novamente"
            formControlName="confirmPassword"
            [invalid]="isInvalid('confirmPassword') || (registerForm.errors?.['passwordsMismatch'] && (registerForm.get('confirmPassword')?.touched || formSubmitted()))"
            class="form-input"
          />
          @if (isInvalid('confirmPassword') &&
          registerForm.get('confirmPassword')?.errors?.['required']) {
          <p-message severity="error" size="small" variant="simple">
            Confirmar sua senha é obrigatório.
          </p-message>
          } @if (registerForm.errors?.['passwordsMismatch'] &&
          (registerForm.get('confirmPassword')?.touched || formSubmitted())) {
          <p-message severity="error" size="small" variant="simple"
            >As senhas devem coincidir.</p-message
          >
          }
        </div>

        <button pButton type="submit" class="register-button">
          <span pButtonLabel>Começar Aventura</span>
        </button>
      </form>
    </div>

    <!-- Footer text -->
    <div class="register-footer">
      <p>Já possui uma conta? <a href="/login" class="login-link">Fazer login</a></p>
    </div>
  </div>
</div>
